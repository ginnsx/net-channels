# net-channels

物理隔离的网络环境下，利用二维码进行数据传输。

## 功能描述

### 核心功能

- 内外网物理隔离环境下的数据传输
- 通过二维码作为数据传输媒介
- 大数据量需要分片传输
- 确保数据传输的可靠性和完整性

### 关键需求

1. 数据传输

    - [ ] 支持大文件分片传输
    - [ ] 保证数据完整性和准确性
    - [ ] 优化传输速度
    - [ ] 支持断点续传

2. 安全性

    - [ ] 数据加密
    - [ ] 传输验证
    - [ ] 防篡改机制

3. 用户体验

    - [ ] 传输进度显示
    - [ ] 错误提示和重试机制

## 系统架构

```plaintext
[外网区域]                    [内网区域]
+---------------+            +---------------+
| 外网服务器     |            | 内网服务器     |
| - 数据处理     |   二维码    | - 数据处理     |
| - 分片管理     | ---------> | - 分片重组     |
| - 编码生成     |   扫描      | - 数据校验     |
+---------------+            +---------------+
       ↑                            ↓
+---------------+            +---------------+
| 外网客户端     |            | 内网客户端     |
| - 展示二维码   |            | - 扫码器对接   |
+---------------+            +---------------+
```

### 核心模块设计

1. **通用核心模块 (net-channels-core)**

   ```plaintext
   com.netchannels.core
   ├── model/          # 数据模型
   ├── protocol/       # 传输协议
   ├── crypto/         # 加密工具
   ├── codec/          # 编解码器
   ├── session/        # 会话管理
   └── exception/      # 异常处理
   └── transfer/       # 数据拆分/重组
   ```

2. **外网服务端 (net-channels-external)**

   ```plaintext
   com.netchannels.external
   ├── controller/     # 接口控制器
   ├── service/        # 业务服务
   └── config/         # 配置管理
   ```

3. **内网服务端 (net-channels-internal)**

   ```plaintext
   com.netchannels.internal
   ├── controller/     # 接口控制器
   ├── service/        # 业务服务
   └── config/         # 配置管理
   ```

### 数据传输协议

```json
{
    "header": {
        "sessionId": "uuid", // 会话ID
        "totalChunks": 100, // 总分片数
        "currentChunk": 1, // 当前分片序号
        "chunkSize": 2048, // 分片大小
        "totalSize": 204800, // 总数据大小
        "checksum": "md5-hash", // 数据校验和
        "timestamp": 1648888888, // 时间戳
        "version": "1.0", // 协议版本
        "encoding": "base64", // 编码方式
        "compression": "gzip", // 压缩方式
        "encryption": "aes" // 加密方式
    },
    "data": "base64-encoded-data" // 加密后的数据
}
```

### 传输流程

发送端流程

1. 接收数据并创建传输会话
2. 数据分片处理
3. 对每个分片进行加密和校验
4. 生成二维码并按序展示
5. 跟踪传输进度

接收端流程

1. 扫描二维码获取数据
2. 解析协议头部信息
3. 验证数据完整性
4. 临时存储分片数据
5. 所有分片接收完成后重组数据

## 性能指标

- 有效数据传输速率 (bytes/second)
- 扫描成功率
- 二维码生成时间(ms)
- 数据处理时间 (ms)
